vec3 transformedNormal;

#ifdef USE_SKINNING

	transformedNormal = skinnedNormal.xyz;

#endif

#ifdef USE_MORPHNORMALS

	transformedNormal = morphedNormal;

#endif

#ifndef USE_MORPHNORMALS
#ifndef USE_SKINNING

	transformedNormal = normal;

#endif
#endif

transformedNormal = normalMatrix * transformedNormal;